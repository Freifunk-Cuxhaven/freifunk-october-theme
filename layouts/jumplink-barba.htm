description = "Barba.js layout"

[staticPage]
==
<?php
// TODO wird diese funktion zweimal aufgerufen?
function onMailSent() {
    
    $formVars = [
        'receivermail' => post('receivermail'),
        'receivername' => post('receivername'),
        'succeesstext' => post('succeesstext'),
        'receiverregard' => post('receiverregard'),
        'mailtemplate' => post('mailtemplate'),
        'name' => post('name'),
        'email' => post('email'),
        'regard' => post('regard'),
        'sendermessage' => post('message'),
    ];
    
    $formVars['receiverregard'] = str_replace("{{name}}", $formVars['name'], $formVars['receiverregard']);
    $formVars['receiverregard'] = str_replace("{{regard}}", $formVars['regard'], $formVars['receiverregard']);
    
    $buildOwnerMessage = function ($message) use ($formVars) {
        // TODO use email and name from backend or theme settings
        $message->to($formVars['receivermail'], $formVars['receivername']);
        $message->subject($formVars['receiverregard']);
    };

    // mail to site owner
    Mail::send($formVars['mailtemplate'], $formVars, $buildOwnerMessage);
      
    $this['result'] = $formVars['succeesstext'];
}
?>
==
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>{{this.theme.site_name}} - {{ this.page.title }}</title>
        <meta name="description" content="{{ this.page.meta_description }}">
        <meta name="title" content="{{ this.page.meta_title }}">
        <meta name="author" content="Pascal Garber">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        {% partial 'jumplink-favicons' %}
        {% styles %}
        
        <link href="{{ ['assets/scss/theme.scss'] | theme }}" rel="stylesheet">
    </head>
    <body id="{{ str_studly(this.page.title) | lower | replace({'/':'_'}) }}" data-spy="scroll">
        
        {# Content #}
        <section id="layout-content">
            {% partial 'jumplink-navbar' %}
            <div id="barba-wrapper">
                <div {% partial 'jumplink-barba-container-attributes' %}>
                    {% page %}
                </div>
            </div>
            {% partial 'jumplink-footer' %}
        </section>
        
        <template id="slick-prev-arrow">
            <button type="button" data-role="none" class="slick-prev slick-prev-iconset slick-arrow w-24 h-24" aria-label="Previous" role="button">
                {% partial 'jumplink-iconset' name='arrow_carrot_thin' direction='left' color='gray' size='24' %}
            </button>
        </template>
        
        <template id="slick-next-arrow">
            <button type="button" data-role="none" class="slick-next slick-next-iconset slick-arrow w-24 h-24" aria-label="Next" role="button">
                {% partial 'jumplink-iconset' name='arrow_carrot_thin' direction='right' color='gray' size='24' %}
            </button>
        </template>
            
        
        {# Scripts #}
        <script src="{{ [
            'assets/vendor/jquery/dist/jquery.js',
            'assets/vendor/tether/dist/js/tether.js',
            'assets/vendor/bootstrap/dist/js/bootstrap.js',
            'assets/vendor/simpler-sidebar/dist/jquery.simpler-sidebar.js',
            'assets/vendor/barba.js/dist/barba.js',
            'assets/vendor/gsap/src/uncompressed/TweenMax.js',
            'assets/vendor/leaflet/dist/leaflet.js',
            'assets/vendor/slick-carousel/slick/slick.js',
            'assets/vendor/jquery-touch-events/src/jquery.mobile-events.js',
            'assets/vendor/prism/prism.js',
            'assets/vendor/jumplink-components/javascript/styleicons.js',
            'assets/vendor/jumplink-components/javascript/utilities.js',
            'assets/vendor/jumplink-components/javascript/dataApi.js',
        ]|theme }}" ></script>
        
        <script>
            L.Icon.Default.imagePath = "/themes/{{this.theme.dirname}}/assets/vendor/leaflet/dist/images/";
        </script>
        
        <script src="{{ [
            'assets/javascript/app.js',
        ]|theme }}"></script>
        
        {% framework %}
        {% scripts %}

    </body>
</html>